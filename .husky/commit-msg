#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# 檢查 commit 訊息格式
commit_regex='^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo "❌ 無效的 commit 訊息格式!"
    echo ""
    echo "正確格式: <type>(<scope>): <description>"
    echo ""
    echo "類型 (type):"
    echo "  feat:     新功能"
    echo "  fix:      修復 bug"
    echo "  docs:     文檔更新"
    echo "  style:    程式碼格式化"
    echo "  refactor: 重構程式碼"
    echo "  test:     測試相關"
    echo "  chore:    其他雜項"
    echo ""
    echo "範例:"
    echo "  feat: 新增使用者登入功能"
    echo "  fix(auth): 修復登入驗證問題"
    echo "  docs: 更新 README"
    echo ""
    exit 1
fi
